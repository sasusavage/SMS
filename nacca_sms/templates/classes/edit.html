{% extends "layouts/dashboard.html" %}

{% block title %}Edit {{ cls.name }} - NaCCA SMS{% endblock %}

{% block breadcrumb %}
<nav class="breadcrumb">
    <a href="{{ url_for('dashboard.index') }}">Dashboard</a>
    <span class="breadcrumb-separator">/</span>
    <a href="{{ url_for('classes.index') }}">Classes</a>
    <span class="breadcrumb-separator">/</span>
    <a href="{{ url_for('classes.view', id=cls.id) }}">{{ cls.name }}</a>
    <span class="breadcrumb-separator">/</span>
    <span class="breadcrumb-current">Edit</span>
</nav>
{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Edit Class</h1>
    <p class="page-subtitle">Update class information</p>
</div>

<form method="POST" action="{{ url_for('classes.edit', id=cls.id) }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <div class="card" style="max-width: 600px;">
        <div class="card-body">
            <div class="form-group">
                <label class="form-label" for="name">Class Name *</label>
                <input type="text" id="name" name="name" class="form-input" value="{{ cls.name }}" required>
            </div>

            <div class="form-group">
                <label class="form-label" for="level">Level *</label>
                <select id="level" name="level" class="form-select" required>
                    <option value="PRIMARY" {% if cls.level=='PRIMARY' %}selected{% endif %}>Primary</option>
                    <option value="JHS" {% if cls.level=='JHS' %}selected{% endif %}>JHS</option>
                    <option value="SHS" {% if cls.level=='SHS' %}selected{% endif %}>SHS</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label" for="class_teacher_id">Class Teacher</label>
                <select id="class_teacher_id" name="class_teacher_id" class="form-select">
                    <option value="">No Class Teacher</option>
                    {% for teacher in teachers %}
                    <option value="{{ teacher.id }}" {% if cls.class_teacher_id==teacher.id %}selected{% endif %}>{{
                        teacher.full_name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label class="form-label" for="room_number">Room Number</label>
                <input type="text" id="room_number" name="room_number" class="form-input"
                    value="{{ cls.room_number or '' }}">
            </div>

            <div class="form-group">
                <label class="form-label" for="capacity">Capacity *</label>
                <input type="number" id="capacity" name="capacity" class="form-input" value="{{ cls.capacity }}" min="1"
                    required>
            </div>

            <div class="form-group">
                <label class="form-label" for="is_active">Status</label>
                <select id="is_active" name="is_active" class="form-select">
                    <option value="1" {% if cls.is_active %}selected{% endif %}>Active</option>
                    <option value="0" {% if not cls.is_active %}selected{% endif %}>Inactive</option>
                </select>
            </div>
        </div>
        <div class="card-footer" style="display: flex; justify-content: flex-end; gap: var(--space-3);">
            <a href="{{ url_for('classes.view', id=cls.id) }}" class="btn btn-ghost">Cancel</a>
            <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
    </div>
</form>
{% endblock %}