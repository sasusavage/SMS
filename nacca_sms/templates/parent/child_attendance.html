{% extends "layouts/dashboard.html" %}

{% block title %}{{ student.full_name }} Attendance - NaCCA SMS{% endblock %}

{% block breadcrumb %}
<nav class="breadcrumb">
    <a href="{{ url_for('parent.dashboard') }}">Parent Portal</a>
    <span class="breadcrumb-separator">/</span>
    <span class="breadcrumb-current">{{ student.full_name }} - Attendance</span>
</nav>
{% endblock %}

{% block content %}
<div class="page-header">
    <div style="display: flex; align-items: center; gap: var(--space-4);">
        <div class="user-avatar" style="width: 56px; height: 56px; font-size: var(--font-size-lg);">
            {{ student.first_name[0] }}{{ student.last_name[0] }}
        </div>
        <div>
            <h1 class="page-title">{{ student.full_name }}</h1>
            <p class="page-subtitle">Attendance Record (Last 30 Days)</p>
        </div>
    </div>
</div>

<!-- Attendance Records -->
<div class="card">
    <div class="card-body" style="padding: 0;">
        <div class="table-wrapper">
            <table class="table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Day</th>
                        <th>Status</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in records %}
                    <tr>
                        <td style="font-weight: 500;">{{ record.date.strftime('%b %d, %Y') }}</td>
                        <td>{{ record.date.strftime('%A') }}</td>
                        <td>
                            {% if record.status.value == 'present' %}
                            <span class="badge badge-success">Present</span>
                            {% elif record.status.value == 'absent' %}
                            <span class="badge badge-error">Absent</span>
                            {% elif record.status.value == 'late' %}
                            <span class="badge badge-warning">Late</span>
                            {% elif record.status.value == 'excused' %}
                            <span class="badge badge-primary">Excused</span>
                            {% endif %}
                        </td>
                        <td style="color: var(--slate-400);">{{ record.notes or '-' }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4" style="text-align: center; padding: var(--space-8); color: var(--slate-500);">
                            No attendance records found
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}