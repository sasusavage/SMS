{% extends "layouts/dashboard.html" %}

{% block title %}Edit {{ staff.full_name }} - NaCCA SMS{% endblock %}

{% block breadcrumb %}
<nav class="breadcrumb">
    <a href="{{ url_for('dashboard.index') }}">Dashboard</a>
    <span class="breadcrumb-separator">/</span>
    <a href="{{ url_for('staff.index') }}">Staff</a>
    <span class="breadcrumb-separator">/</span>
    <a href="{{ url_for('staff.view', id=staff.id) }}">{{ staff.full_name }}</a>
    <span class="breadcrumb-separator">/</span>
    <span class="breadcrumb-current">Edit</span>
</nav>
{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Edit Staff</h1>
    <p class="page-subtitle">Update information for {{ staff.full_name }}</p>
</div>

<form method="POST" action="{{ url_for('staff.edit', id=staff.id) }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-6);">
        <!-- Staff Information -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Staff Information</h3>
            </div>
            <div class="card-body">
                <div class="form-group">
                    <label class="form-label" for="staff_id">Staff ID</label>
                    <input type="text" id="staff_id" class="form-input" value="{{ staff.staff_id }}" disabled>
                </div>
                <div class="form-group">
                    <label class="form-label" for="first_name">First Name *</label>
                    <input type="text" id="first_name" name="first_name" class="form-input"
                        value="{{ staff.first_name }}" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="last_name">Last Name *</label>
                    <input type="text" id="last_name" name="last_name" class="form-input" value="{{ staff.last_name }}"
                        required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="gender">Gender *</label>
                    <select id="gender" name="gender" class="form-select" required>
                        <option value="male" {% if staff.gender and staff.gender.value=='male' %}selected{% endif %}>
                            Male</option>
                        <option value="female" {% if staff.gender and staff.gender.value=='female' %}selected{% endif
                            %}>Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="position">Position *</label>
                    <input type="text" id="position" name="position" class="form-input" value="{{ staff.position }}"
                        required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="is_active">Status</label>
                    <select id="is_active" name="is_active" class="form-select">
                        <option value="1" {% if staff.is_active %}selected{% endif %}>Active</option>
                        <option value="0" {% if not staff.is_active %}selected{% endif %}>Inactive</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Contact Information -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Contact Information</h3>
            </div>
            <div class="card-body">
                <div class="form-group">
                    <label class="form-label" for="phone">Phone</label>
                    <input type="tel" id="phone" name="phone" class="form-input" value="{{ staff.phone or '' }}">
                </div>
                <div class="form-group">
                    <label class="form-label" for="email">Email</label>
                    <input type="email" id="email" name="email" class="form-input" value="{{ staff.email or '' }}">
                </div>
                <div class="form-group">
                    <label class="form-label" for="date_employed">Date Employed</label>
                    <input type="date" id="date_employed" name="date_employed" class="form-input"
                        value="{{ staff.date_employed.strftime('%Y-%m-%d') if staff.date_employed else '' }}">
                </div>
            </div>
        </div>
    </div>

    <div style="display: flex; justify-content: flex-end; gap: var(--space-3); margin-top: var(--space-6);">
        <a href="{{ url_for('staff.view', id=staff.id) }}" class="btn btn-ghost">Cancel</a>
        <button type="submit" class="btn btn-primary">Save Changes</button>
    </div>
</form>
{% endblock %}